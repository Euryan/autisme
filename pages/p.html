<!DOCTYPE html>
<html lang="en">
<head>
  <title>Screening Eye-Tracking</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../css/vendor.css">
  <link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>

  <!-- Navbar -->
  <header id="header">
    <nav id="primary-header" class="navbar navbar-expand-lg sticky-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <img src="../images/main-logo.png" class="logo img-fluid">
        </a>
      </div>
    </nav>
  </header>

  <!-- Page Title -->
  <section class="py-5 bg-light text-center">
    <div class="container">
      <h1 class="display-5 fw-bold">Screening Eye-Tracking</h1>
      <p class="text-muted">Lakukan tes singkat sebelum melanjutkan ke pertanyaan.</p>
    </div>
  </section>

  <!-- Eye Tracking Test -->
  <section id="eye-tracking" class="py-5">
    <div class="container text-center">
      <button class="btn btn-primary rounded-pill px-4" data-bs-toggle="modal" data-bs-target="#eyeTrackingModal">
        Lakukan Test!
      </button>

      <!-- Hasil -->
      <div class="mt-4">
        <h5>Hasil:</h5>
        <p id="eyeTrackingResult" class="text-muted">Belum ada hasil</p>
      </div>

      <!-- Tombol Lanjut -->
      <div class="mt-5">
        <a href="test-question.html" class="btn btn-success rounded-pill px-4">Lanjut ke Pertanyaan</a>
      </div>
    </div>
  </section>

  <!-- Modal Eye Tracking -->
  <div class="modal fade" id="eyeTrackingModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Tes Eye-Tracking</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center">
          <p>Ikuti titik merah yang bergerak.</p>
          <div id="trackingArea" style="position: relative; height: 300px; background: #f8f9fa;">
            <div id="movingDot" style="width:30px; height:30px; border-radius:50%; background:red; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
          <button type="button" class="btn btn-primary" onclick="finishTest()">Selesai</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-white py-4 text-center">
    <p class="mb-0">Â© 2025 Autism Project. All rights reserved.</p>
  </footer>

  <!-- Script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let interval;
    const dot = document.getElementById("movingDot");

    document.getElementById("eyeTrackingModal").addEventListener("shown.bs.modal", () => {
      interval = setInterval(() => {
        const area = document.getElementById("trackingArea");
        const maxX = area.clientWidth - 30;
        const maxY = area.clientHeight - 30;
        const x = Math.random() * maxX;
        const y = Math.random() * maxY;
        dot.style.left = x + "px";
        dot.style.top = y + "px";
      }, 800);
    });

    document.getElementById("eyeTrackingModal").addEventListener("hidden.bs.modal", () => {
      clearInterval(interval);
    });

    function finishTest() {
      document.getElementById("eyeTrackingResult").innerText = "Tes selesai. Hasil: Respon baik.";
      const modal = bootstrap.Modal.getInstance(document.getElementById("eyeTrackingModal"));
      modal.hide();
    }
  </script>
</body>
</html>
